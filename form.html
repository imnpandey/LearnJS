<style type="text/css">
.form-style-2 { 
    margin: 160px auto;
    border: 1px solid #ccc;
}
.form-style-2{
    max-width: 500px;
    padding: 20px 12px 10px 20px;
    font: 13px Arial, Helvetica, sans-serif;
}
.form-style-2-heading{
    font-weight: bold;
    font-style: italic;
    border-bottom: 2px solid #ddd;
    margin-bottom: 20px;
    font-size: 15px;
    padding-bottom: 3px;
}
.form-style-2 label{
    display: block;
    margin: 0px 0px 15px 0px;
}
.form-style-2 label > span{
    width: 100px;
    font-weight: bold;
    float: left;
    padding-top: 8px;
    padding-right: 5px;
}
.form-style-2 span.required{
    color:red;
}
.form-style-2 .tel-number-field{
    width: 40px;
    text-align: center;
}
.form-style-2 input.input-field{
    width: 48%;
    
}

.form-style-2 input.input-field, 
.form-style-2 .tel-number-field, 
.form-style-2 .textarea-field, 
 .form-style-2 .select-field{
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    border: 1px solid #C2C2C2;
    box-shadow: 1px 1px 4px #EBEBEB;
    -moz-box-shadow: 1px 1px 4px #EBEBEB;
    -webkit-box-shadow: 1px 1px 4px #EBEBEB;
    border-radius: 3px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    padding: 7px;
    outline: none;
}
.form-style-2 .input-field:focus, 
.form-style-2 .tel-number-field:focus, 
.form-style-2 .textarea-field:focus,  
.form-style-2 .select-field:focus{
    border: 1px solid #0C0;
}
.form-style-2 input[type=submit],
.form-style-2 input[type=button]{
    border: none;
    padding: 8px 15px 8px 15px;
    background: #FF8500;
    color: #fff;
    box-shadow: 1px 1px 4px #DADADA;
    -moz-box-shadow: 1px 1px 4px #DADADA;
    -webkit-box-shadow: 1px 1px 4px #DADADA;
    border-radius: 3px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
}
.form-style-2 input[type=submit]:hover,
.form-style-2 input[type=button]:hover{
    background: #EA7B00;
    color: #fff;
}
</style>
<script type="text/javascript">
function funcSir(data){
    var opt0 = document.getElementById('loji').options[0];
    var opt1 = document.getElementById('loji').options[1]; 
    switch(data) {
        case "UAT3":
                opt0.value =  'P';
                opt0.text = 'P';  
                opt1.value =  'E';
                opt1.text = 'E';
            break;
        case "UAT2":
                opt0.value =  'A';
                opt0.text = 'A';  
                opt1.value =  'B';
                opt1.text = 'B';
            break;  
        case "UAT4":
                opt0.value =  'X';
                opt0.text = 'X';  
                opt1.value =  'Y';
                opt1.text = 'Y';
             break;
     }
}
      

</script>
<div class="form-style-2">
<div class="form-style-2-heading">Provide your information</div>
<form action="" method="post">
    <label for="field4"><span>Regarding</span>
        <select name="field4" class="select-field"  onchange="funcSir(this.value);">
            <option value="UAT3">UAT3</option>
            <option value="UAT2">UAT2</option>
            <option value="UAT4">UAT4</option>
        </select>
    </label>
    <label for="field4"><span>LOL</span>
        <select name="field4" id="loji" class="select-field">
            <option value="P">P</option>
            <option value="E">E</option>
        </select>
    </label>
    <label><span>Region UAT4/UAT6 <span class="required">*</span></span>
        <input type="text" class="input-field" name="region"/>
    </label>
    <label><span>UserName <span class="required">*</span></span>
        <input type="text" class="input-field" name="username" />
    </label>
    <label><span>Password <span class="required">*</span></span>
        <input type="password" class="input-field" name="password"/>
    </label>
    <label><span>&nbsp;</span><input type="submit" value="Submit" />
    </label>
</form>
</div>


import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.*;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.*;
import org.xml.sax.SAXException;
import java.io.*;
import java.util.*;
import java.util.regex.Pattern;
import java.util.regex.Matcher;
import org.apache.commons.io.FileUtils;
import org.apache.commons.lang.StringUtils;


public String getTagValue(String rootTag)
{   
    
    //String fileName = projPath + "\\Reports\\XML Responses\\responseArrangementMatchInvolvedPartySearchService_"+actTraceId+".xml";
    String fileName ="C:\\Users\\o627614\\Desktop\\demo.xml";
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    String abc = "";
    //Using factory get an instance of document builder
    DocumentBuilder db = dbf.newDocumentBuilder();  
    Document dom = db.parse(fileName);

    Element elem1 = dom.getDocumentElement();
    NodeList innerList1;
    innerList1 = elem1.getElementsByTagName("*");
    for(int k=0; k<innerList1.getLength(); k++){   
        Element val1 = (Element)innerList1.item(k);
        String line1 = val1.getNodeName();
        if(line1.contains(rootTag)){
            rootTag1 = line1;
            break;
        }
    }

    Element elem = dom.getDocumentElement();
    NodeList newNode;
    newNode = elem.getElementsByTagName(rootTag1);

        String line = "";

        for(mainCount=0; mainCount<newNode.getLength(); mainCount++){            
            textVal = "";
            Element el = (Element)newNode.item(mainCount);
            NodeList innerList = el.getElementsByTagName("*");

            for(int k=0;k<innerList.getLength();k++){ 
                Element val = (Element)innerList.item(k);
                line = line + val.getNodeName() + ",";      
                
            }
                line = line.substring(0, line.length()-1) + "\n";
        }

    int max = 0;
 /*   lineArr = line.split("\n");
    for(i = 0; i < lineArr.length; i++){
        lineArrLen = lineArr[i].split(",");
            if(lineArrLen.length > max){
                max = lineArrLen.length;
            }
    }*/

line1 = line.replaceAll("\n", ",");
lineArr1 = line1.split(",");
max = lineArr1.length;


    String finalString = "";
    String[] lineArrSub0 = new String[max+1];
    String[] lineArrSub1 = new String[max+1];

lineArr = line.split("\n");
    comma = "";
   /* lineArrSub0 = lineArr[0].split(",");

    if(lineArrSub0.length != max){
        len = max - lineArrSub0.length;
            for(z = 0; z < len; z++){
                comma = comma + ",";
            }
        lineArr[0] = lineArr[0] ;
    }
*/
    lineArrSub0 = lineArr[0].split(",");
    // return lineArrSub0.length.toString();
        for(i = 0; i < lineArr.length; i++){
                /*lineArrSub1 = lineArr[i].split(",");

                  if(lineArrSub1.length != max){
                        len = max - lineArrSub1.length;
                        for(z = 0; z < len; z++){
                            comma = comma + ",";
                        }
                        lineArr[i] = comma + lineArr[i];
                  }*/

                lineArrSub1 = lineArr[i].split(",");
                int k = 0;
//return max + "," + lineArrSub0.length + "," + lineArrSub1.length;
                    for(j = 0; j < lineArrSub1.length; j++){
                       
                            it1 = j;
                            it2 = j;
                        
try{
                        /*if(lineArrSub0[it1].equals(lineArrSub1[it2])){
                               finalString = finalString + lineArrSub0[it1] + ",";
                        }else{

                               k = j + 1;
                                if(lineArrSub0[k].equals(lineArrSub1[it2])){
                                    finalString = finalString + lineArrSub0[it1] + "," + lineArrSub0[k] + ",";                                   
                                    j++;
                                    it1 = j;
                                }else if(lineArrSub0[it1].equals(lineArrSub1[k])){
                                    finalString = finalString + lineArrSub1[it2] + "," + lineArrSub1[k] + ",";                                    
                                    j++;
                                    it2 = j;
                                }
                        }*/
                            if(lineArrSub0[it1].equals(lineArrSub1[it2])){
                                   finalString = finalString + lineArrSub0[j] + ",";
                            }else{     
                                   k = j + 1;
                                    if(lineArrSub0[k].equals(lineArrSub1[l])){
                                        while(k != j){
                                            finalString = finalString + lineArrSub0[l] + ",";   
                                            j++;
                                        }
                                    }else{
                                        k = l + 1;
                                         if(lineArrSub0[j].equals(lineArrSub1[k])){
                                            while(k != l){
                                                finalString = finalString + lineArrSub1[j] + ",";                                    
                                                l++;
                                             }
                                          }          
                                    }
                            }
}catch(Exception e){
    return k + "," +it1 + "," +it2;
}
                    }
            
            if(lineArr.length != i+1){
                  lineArrSub0 = finalString.split(","); 
                  finalString = "";
            }

    }
    return finalString;
}

objectReferenceWs = getTagValue(":hasInvolvedPartySummary");
return objectReferenceWs;

